# SQL管理工具 - 更新指南

## 概述

本指南提供了如何更新和维护SQL管理工具的详细说明。针对之前遇到的依赖包安装问题、前端按钮无响应、登录按钮不显示等问题，我们提供了相应的解决方案。

## 更新工具

我们提供了两个主要工具来帮助您管理和更新应用：

### 1. 更新脚本 (update.py)

这个脚本提供了全面的更新和维护功能，包括：

- 数据库备份
- 依赖包更新
- 版本切换
- 前端问题修复
- 自动更新到最新版本

### 2. 简化启动脚本 (start.py)

这个脚本简化了应用的启动过程，包括：

- 自动检测可用版本
- 依赖包检查和安装
- 一键启动应用
- 智能推荐最佳版本

## 使用方法

### 基本更新流程

1. **运行更新脚本**：
   ```bash
   python update.py
   ```

2. **选择需要的操作**：
   - 备份数据库（推荐先做备份）
   - 更新依赖包
   - 修复前端问题
   - 版本切换

3. **启动应用**：
   ```bash
   python start.py
   ```

### 解决特定问题

#### 问题1：依赖包安装错误

**解决方案**：
1. 运行 `python update.py`
2. 选择选项2（更新依赖包）
3. 选择合适的requirements文件：
   - 选项1：SQLite版本（推荐，无pyodbc依赖）
   - 选项2：兼容版本（解决版本冲突）
   - 选项3：极简版本（仅需PyJWT）

#### 问题2：前端按钮无响应

**解决方案**：
1. 运行 `python update.py`
2. 选择选项4（修复前端问题）
3. 脚本会自动修复事件监听器上的错误

#### 问题3：登录按钮不显示

**解决方案**：
1. 运行 `python update.py`
2. 选择选项4（修复前端问题）
3. 脚本会确保登录模态框在页面加载时显示

#### 问题4：无法启动应用

**解决方案**：
1. 运行 `python start.py`
2. 脚本会自动检测问题并提供解决方案
3. 如果有缺失的依赖包，会提示安装

### 版本切换

如果您遇到持续的问题，可以尝试切换到不同的版本：

1. 运行 `python update.py`
2. 选择选项5（版本切换）
3. 选择合适的版本：
   - 选项1：SQLite版本（使用Flask，推荐）
   - 选项2：极简版本（使用Python标准库）
   - 选项3：简单版本
   - 选项4：原始版本

### 极简版本说明

极简版本（run_minimal.py）使用Python标准库，避免了复杂的依赖问题：

**优点**：
- 无需安装任何额外依赖（除了PyJWT）
- 启动速度快
- 兼容性好

**缺点**：
- 功能相对简单
- 不支持高级特性

**启动极简版本**：
```bash
python run_minimal.py
```

或通过启动脚本选择：
```bash
python start.py
```

## 推荐配置

对于大多数用户，我们推荐：

1. **使用SQLite版本**：
   - 运行 `python update.py`
   - 选择选项5（版本切换）
   - 选择选项1（SQLite版本）

2. **启动应用**：
   ```bash
   python start.py
   ```

## 测试用户

应用内置了测试用户，可用于快速登录：
- 邮箱：test@example.com
- 密码：password123

## 常见问题解答

### Q: 更新后数据会丢失吗？

A: 不会。更新脚本会自动备份数据库文件。建议在更新前先运行选项1（备份数据库）。

### Q: 极简版本和完整版有什么区别？

A: 极简版本使用Python标准库实现HTTP服务器，功能相对简单但兼容性更好。完整版使用Flask框架，功能更完整但依赖更多。

### Q: 如何手动备份数据库？

A: 可以直接复制以下文件：
- 完整版：sql-manager-backend/sql_manager.db
- 极简版：sql_manager_minimal.db

### Q: 更新失败怎么办？

A: 如果自动更新失败，可以尝试：
1. 手动运行 `python update.py` 并选择具体的修复选项
2. 使用 `python start.py` 尝试启动不同版本
3. 查看错误信息并针对性解决

## 联系支持

如果您遇到无法解决的问题，请提供以下信息寻求支持：
- 操作系统版本
- Python版本
- 错误信息截图
- 已尝试的解决方案

祝您使用愉快！
